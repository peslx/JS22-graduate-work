(()=>{"use strict";(()=>{const e=document.querySelectorAll("a[href='#callback']"),t=document.querySelectorAll("a[href='#application']"),i=document.querySelector(".overlay"),o=document.querySelector(".header-modal"),r=o.querySelector(".header-modal__close"),l=document.querySelector(".services-modal"),s=l.querySelector(".services-modal__close"),n=e=>{e.style.display="block",i.style.display="block"},a=e=>{e.style.display="none",i.style.display="none"};document.addEventListener("click",(c=>{e.forEach((e=>{c.target===e?(c.preventDefault,n(o)):c.target!==r&&c.target!==i||a(o)})),t.forEach((e=>{c.target===e?(c.preventDefault,n(l)):c.target!==s&&c.target!==i||a(l)}))}))})(),{benefitsSliderBlock:document.getElementById("benefits-slider"),fixSliderWidth(){window.outerWidth>=576?this.benefitsSliderBlock.style.width="560px":window.outerWidth<576&&(this.benefitsSliderBlock.style.width="180px")},init(){this.fixSliderWidth(),window.addEventListener("resize",(e=>{this.fixSliderWidth()})),new Swiper("#benefits-slider",{direction:"horizontal",loop:!0,centeredSlides:!0,breakpoints:{320:{slidesPerView:1,spaceBetween:30},566:{slidesPerView:3,spaceBetween:10}},navigation:{nextEl:".benefits__arrow--right",prevEl:".benefits__arrow--left"}})}}.init(),{init(){new Swiper("#services-slider",{direction:"horizontal",slidesPerView:2,spaceBetween:30,breakpoints:{320:{slidesPerView:1,spaceBetween:30,grid:{rows:1,fill:"row"}},576:{slidesPerView:1,spaceBetween:30,grid:{rows:2,fill:"row"}},1200:{slidesPerView:2,spaceBetween:30,grid:{rows:1,fill:"row"}}},navigation:{nextEl:".services__arrow--right",prevEl:".services__arrow--left"}})}}.init(),((e=new Date(Date.now()+1728e5))=>{class t{constructor(e,t,i,o,r,l,s){this.deadline=e,this.timerBlock=document.querySelector(t),this.timerContent=this.timerBlock.querySelector(i),this.dayBlock=this.timerContent.querySelector(o),this.hoursBlock=this.timerContent.querySelector(r),this.minutesBlock=this.timerContent.querySelector(l),this.secondsBlock=this.timerContent.querySelector(s),this.timerID=0}getTimeToDeadline(){let t=new Date(e).getTime(),i=(new Date).getTime(),o=Math.floor((t-i)/1e3);return{days:Math.floor(o/60/60/24),hours:Math.floor(o/60/60%24),minutes:Math.floor(o/60%60),seconds:Math.floor(o%60),remTime:o}}prop(e){let t=String(e);return t.length<2&&(t=`0${t}`),t}stopMsg(){this.timerBlock.innerHTML="Акция завершена!"}refreshTime(){let e=this.getTimeToDeadline();this.dayBlock.textContent=this.prop(e.days),this.hoursBlock.textContent=this.prop(e.hours),this.minutesBlock.textContent=this.prop(e.minutes),this.secondsBlock.textContent=this.prop(e.seconds),e.remTime<=0&&(clearInterval(this.timerID),setTimeout(stopMsg,2e3),this.dayBlock.textContent="00",this.hoursBlock.textContent="00",this.minutesBlock.textContent="00",this.secondsBlock.textContent="00")}init(){this.refreshTime(),this.timerID=setInterval((()=>{this.refreshTime()}),1e3)}}const i=new t(e,"#order_1",".countdown-text",".count-wrap > .count_1 > span",".count-wrap > .count_2 > span",".count-wrap > .count_3 > span",".count-wrap > .count_4 > span"),o=new t(e,"#order_2",".countdown-text",".count-wrap > .count_1 > span",".count-wrap > .count_2 > span",".count-wrap > .count_3 > span",".count-wrap > .count_4 > span");i.init(),o.init()})(),(()=>{const e=document.querySelector(".smooth-scroll"),t=document.getElementById("offer"),i=()=>{e.style.display="none",e.style.opacity=0};i(),document.addEventListener("scroll",(()=>{window.scrollY>=t.offsetTop+t.offsetHeight?(e.style.display="",e.style.opacity=""):window.scrollY<=t.offsetHeight-t.offsetTop&&i()})),e.addEventListener("click",(e=>{console.dir(benefits),e.preventDefault(),window.scrollBy({top:-window.scrollY,behavior:"smooth"})}))})(),(new class{constructor(){this.forms=document.querySelectorAll("form"),this.validate={words:{cyr:e=>e.replace(/[^а-яА-Я\- ]/g,""),lat:e=>e.replace(/[^a-zA-Z\- ]/g,""),any:e=>e.replace(/[^а-яА-Яa-zA-Z\- ]/g,"")},digits:e=>e.replace(/\D/g,""),mail:e=>e.replace(/[^a-zA-Z0-9\-@_.~!'*]/g,""),phone:e=>e.replace(/[^\d\(\)\+\-]/g,""),onInput:e=>{"text"==e.type?"phone"==e.name?e.value=this.validate.phone(e.value):"email"==e.name?e.value=this.validate.mail(e.value):(e.value=e.value.replace(/^\s+/,""),e.value=this.validate.words.any(e.value)):"email"==e.type?e.value=this.validate.mail(e.value):"tel"==e.type&&(e.value=this.validate.phone(e.value))},onBlur:e=>{e.value=e.value.trim(),e.value=e.value.replace(/\s+\b/g," "),e.value=e.value.replace(/\b\s+/g," "),e.value=e.value.replace(/\s+/g," "),e.value=e.value.replace(/\-+/g,"-"),e.value=e.value.replace(/(^-)|(-$)/g,""),e.value=e.value.replace(/(^ +)|( +$)/g,""),"text"===e.type&&""!==e.value&&(e.value=e.value.split(/\s/).map((e=>e[0].toUpperCase()+e.substring(1))).join(" "))}}}setValid(e){e.classList.remove("validError"),e.classList.add("validOk"),e.style.borderBottom="2px solid green",e.style.color="green",e.style.backgroundColor="#88ff88"}setInvalid(e){e.classList.remove("validOk"),e.classList.add("validError"),e.style.borderBottom="2px solid red",e.style.color="red",e.style.backgroundColor="#ff8888"}addInvalidListener(e,t=!1){e.addEventListener("invalid",(i=>{i.preventDefault(),setInvalid(e),t&&console.error(`${e.name}: 'пустое значение'`)}))}checkValidity(e,t=!1){""!==e.value?this.setValid(e):(this.setInvalid(e),t&&console.error(`${e.name}: 'пустое значение'`))}removeValidClass(e){e.classList.remove("validOk"),e.classList.remove("validError"),e.style.borderBottom="",e.style.color="",e.style.backgroundColor="","hidden"!==e.type&&(e.value="")}sendForm(e,t="https://jsonplaceholder.typicode.com/posts"){return fetch(t,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((e=>e.json()))}onSubmit(e,t,i=!1){if(t){let t={};e.querySelectorAll("input").forEach((e=>{t[e.name]=e.value,this.removeValidClass(e)})),this.sendForm(t).then((e=>i?console.log("Ответ от сервера: "+JSON.stringify(e)):null))}else i&&console.error(`Ошибка в форме (${e.id?"id:"+e.id:"name:"+e.name}): "Форма не заполнена"`)}init(e=!1){e&&console.log(this),this.forms.forEach((t=>{t.querySelectorAll("input").forEach((t=>{t.addEventListener("input",(()=>{this.validate.onInput(t)})),t.addEventListener("blur",(e=>{this.validate.onBlur(t)})),this.addInvalidListener(t,e)}))})),document.addEventListener("submit",(t=>{this.forms.forEach((i=>{if(t.target===i){t.preventDefault();let o=!0;i.querySelectorAll("input").forEach((t=>{this.checkValidity(t,e),t.addEventListener("change",(()=>{this.checkValidity(t)})),t.classList.contains("validError")&&(o=!1)})),this.onSubmit(i,o,e)}}))}))}}).init()})();