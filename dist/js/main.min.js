(()=>{"use strict";class e{constructor(e){this.userCallbackFunc=e,this.forms=document.querySelectorAll("form"),this.validate={words:{cyr:e=>e.replace(/[^а-яА-Я\- ]/g,""),lat:e=>e.replace(/[^a-zA-Z\- ]/g,""),any:e=>e.replace(/[^а-яА-Яa-zA-Z\- ]/g,"")},digits:e=>e.replace(/\D/g,""),mail:e=>e.replace(/[^a-zA-Z0-9\-@_.~!'*]/g,""),phone:e=>e.replace(/[^\d\(\)\+\-]/g,""),onInput:e=>{"text"==e.type?"phone"==e.name?(e.value=this.validate.phone(e.value),e.value=e.value.substring(0,16)):"email"==e.name?e.value=this.validate.mail(e.value):(e.value=e.value.replace(/^\s+/,""),e.value=this.validate.words.any(e.value)):"email"==e.type?e.value=this.validate.mail(e.value):"tel"!=e.type&&"phone"!=e.name||(e.value=this.validate.phone(e.value),e.value=e.value.substring(0,16))},onBlur:e=>{e.value=e.value.trim(),e.value=e.value.replace(/\s+\b/g," "),e.value=e.value.replace(/\b\s+/g," "),e.value=e.value.replace(/\s+/g," "),e.value=e.value.replace(/\-+/g,"-"),e.value=e.value.replace(/(^-)|(-$)/g,""),e.value=e.value.replace(/(^ +)|( +$)/g,""),"text"===e.type&&""!==e.value&&(e.value=e.value.split(/\s/).map((e=>e[0].toUpperCase()+e.substring(1))).join(" "))}}}setValid(e){e.classList.remove("validError"),e.classList.add("validOk"),e.style.borderBottom="2px solid green",e.style.color="green",e.style.backgroundColor="#88ff88"}setInvalid(e){e.classList.remove("validOk"),e.classList.add("validError"),e.style.borderBottom="2px solid red",e.style.color="red",e.style.backgroundColor="#ff8888"}addInvalidListener(e,t=!1){e.addEventListener("invalid",(r=>{r.preventDefault(),this.setInvalid(e),t&&console.error(`${e.name}: 'пустое значение'`)}))}checkValidity(e,t=!1){""!==e.value?"text"===e.type&&(e.value.length<2||"phone"===e.name&&e.value.length<11?this.setInvalid(e):this.setValid(e)):(this.setInvalid(e),t&&console.error(`${e.name}: 'пустое значение'`))}removeValidClass(e){e.classList.remove("validOk"),e.classList.remove("validError"),e.style.borderBottom="",e.style.color="",e.style.backgroundColor="","hidden"!==e.type&&(e.value="")}sendForm(e,t="https://jsonplaceholder.typicode.com/posts"){return fetch(t,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((e=>{e.json(),this.userCallbackFunc&&this.userCallbackFunc(e.ok)}))}onSubmit(e,t,r=!1){if(t){let t={};e.querySelectorAll("input").forEach((e=>{t[e.name]=e.value,this.removeValidClass(e)})),this.sendForm(t).then((e=>{r&&console.log("Ответ от сервера: "+JSON.stringify(e))}))}else r&&console.error(`Ошибка в форме (${e.id?"id:"+e.id:"name:"+e.name}): "Форма не заполнена"`)}init(e=!1){e&&console.log(this),this.forms.forEach((t=>{t.querySelectorAll("input").forEach((t=>{t.addEventListener("input",(()=>{this.validate.onInput(t),this.checkValidity(t,e)})),t.addEventListener("blur",(e=>{this.validate.onBlur(t)}))}))})),document.addEventListener("submit",(t=>{this.forms.forEach((r=>{if(t.target===r){t.preventDefault();let l=!0;r.querySelectorAll("input").forEach((t=>{this.checkValidity(t,e),t.addEventListener("change",(()=>{this.checkValidity(t)})),t.classList.contains("validError")&&(l=!1)})),this.onSubmit(r,l,e)}}))}))}}(()=>{const t=document.getElementById("menu").querySelector('li[class="active"]').dataset.page,r=document.querySelectorAll("a[href='#callback']"),l=document.querySelectorAll("a[href='#application']"),s=document.querySelector(".overlay");s.style.zIndex=100;const o=document.querySelector(".header-modal"),i=o.querySelector(".header-modal__close"),n=document.querySelector(".services-modal"),a=n.querySelector(".services-modal__close"),c=document.getElementById("responseMessage"),d=c.querySelector("a[href='#']"),u=e=>{e.style.display="block",s.style.display="block"},h=e=>{e.style.display="none",s.style.display="none"};new e((e=>{e?(c.style.cssText="\n        position: fixed;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        z-index: 9999;\n        ",c.querySelector(".modal-content").textContent="Ваша заявка принята!",u(c)):alert("!Error!")})).init(),document.addEventListener("click",(e=>{e.target!==d&&e.target!==s||(e.preventDefault(),h(c)),r.forEach((r=>{e.target===r||e.target.closest("a[href='#callback']")?(e.preventDefault(),o.querySelector("input[name='page']").value=t,u(o),o.querySelector("form").addEventListener("submit",(e=>{e.preventDefault();let t=!0;o.querySelectorAll("input").forEach((e=>{e.classList.contains("validError")&&(t=!1)})),t&&h(o)}))):e.target!==i&&e.target!==s||h(o)})),l.forEach((r=>{if(e.target===r||e.target.closest("a[href='#application']")){e.preventDefault();const l=n.querySelector("input[name='page']"),s=n.querySelector("input[name='subject']");l.value=t,s.value=r.dataset.subject,u(n),n.addEventListener("submit",(()=>{h(n)}))}else e.target!==a&&e.target!==s||h(n)}))}))})(),{benefitsSliderBlock:document.getElementById("benefits-slider"),fixSliderWidth(){window.outerWidth>=576?this.benefitsSliderBlock.style.width="560px":window.outerWidth<576&&(this.benefitsSliderBlock.style.width="180px")},init(){this.fixSliderWidth(),window.addEventListener("resize",(e=>{this.fixSliderWidth()})),new Swiper("#benefits-slider",{direction:"horizontal",loop:!0,centeredSlides:!0,breakpoints:{320:{slidesPerView:1,spaceBetween:30},566:{slidesPerView:3,spaceBetween:10}},navigation:{nextEl:".benefits__arrow--right",prevEl:".benefits__arrow--left"}})}}.init(),{init(){new Swiper("#services-slider",{direction:"horizontal",slidesPerView:2,spaceBetween:30,breakpoints:{320:{slidesPerView:1,spaceBetween:30,grid:{rows:1,fill:"row"}},576:{slidesPerView:1,spaceBetween:30,grid:{rows:2,fill:"row"}},1200:{slidesPerView:2,spaceBetween:30,grid:{rows:1,fill:"row"}}},navigation:{nextEl:".services__arrow--right",prevEl:".services__arrow--left"}})}}.init(),((e=new Date(Date.now()+1728e5))=>{class t{constructor(e,t,r,l,s,o,i){this.deadline=e,this.timerBlock=document.querySelector(t),this.timerContent=this.timerBlock.querySelector(r),this.dayBlock=this.timerContent.querySelector(l),this.hoursBlock=this.timerContent.querySelector(s),this.minutesBlock=this.timerContent.querySelector(o),this.secondsBlock=this.timerContent.querySelector(i),this.timerID=0}getTimeToDeadline(){let t=new Date(e).getTime(),r=(new Date).getTime(),l=Math.floor((t-r)/1e3);return{days:Math.floor(l/60/60/24),hours:Math.floor(l/60/60%24),minutes:Math.floor(l/60%60),seconds:Math.floor(l%60),remTime:l}}prop(e){let t=String(e);return t.length<2&&(t=`0${t}`),t}stopMsg(){this.timerBlock.innerHTML="Акция завершена!"}refreshTime(){let e=this.getTimeToDeadline();this.dayBlock.textContent=this.prop(e.days),this.hoursBlock.textContent=this.prop(e.hours),this.minutesBlock.textContent=this.prop(e.minutes),this.secondsBlock.textContent=this.prop(e.seconds),e.remTime<=0&&(clearInterval(this.timerID),setTimeout(stopMsg,2e3),this.dayBlock.textContent="00",this.hoursBlock.textContent="00",this.minutesBlock.textContent="00",this.secondsBlock.textContent="00")}init(){this.refreshTime(),this.timerID=setInterval((()=>{this.refreshTime()}),1e3)}}const r=new t(e,"#order_1",".countdown-text",".count-wrap > .count_1 > span",".count-wrap > .count_2 > span",".count-wrap > .count_3 > span",".count-wrap > .count_4 > span"),l=new t(e,"#order_2",".countdown-text",".count-wrap > .count_1 > span",".count-wrap > .count_2 > span",".count-wrap > .count_3 > span",".count-wrap > .count_4 > span");r.init(),l.init()})("January 24, 2022 21:00 GMT+0300"),(()=>{const e=document.querySelector(".smooth-scroll"),t=document.getElementById("offer");e.style.cursor="pointer";const r=()=>{e.style.display="none",e.style.opacity=0};r(),document.addEventListener("scroll",(()=>{window.scrollY>=t.offsetTop+t.offsetHeight?(e.style.display="",e.style.opacity=""):window.scrollY<=t.offsetHeight-t.offsetTop&&r()})),e.addEventListener("click",(e=>{e.preventDefault(),window.scrollBy({top:-window.scrollY,behavior:"smooth"})}))})()})();